<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>تسجيل حساب جديد</title>
  <!-- Tailwind (استخدم بناءك المحلي) -->
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
  <link rel="stylesheet" href="dist/tailwind.css">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
    body { font-family: 'Tajawal', sans-serif; background: linear-gradient(135deg, #f0f9ff, #e6f7ff); }
    .step-indicator { height: 8px; width: 30px; border-radius: 4px; background-color: #cbd5e0; transition: all 0.3s ease; cursor: pointer; }
    .step-indicator.active { width: 40px; background-color: #10b981; }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-md bg-white rounded-2xl shadow-xl overflow-hidden">
    <!-- Header -->
    <div class="bg-gradient-to-r from-teal-500 to-emerald-600 py-4 px-6">
      <h1 class="text-white text-xl font-bold text-center">تسجيل حساب جديد</h1>
      <p class="text-emerald-50 text-center text-sm mt-1">ابدأ بالموافقة على الشروط ثم أكمل بياناتك</p>
    </div>

    <!-- Form -->
    <form id="register-form" class="p-6">
      <!-- Step Indicators -->
      <div class="flex justify-center gap-2 mb-6">
        <div class="step-indicator active" data-step="0" title="الموافقة على الشروط"></div>
        <div class="step-indicator" data-step="1" title="الاسم"></div>
        <div class="step-indicator" data-step="2" title="الهاتف والبريد"></div>
        <div class="step-indicator" data-step="3" title="الهوية وكلمة المرور"></div>
      </div>

      <!-- Global error -->
      <div id="register-error" class="text-red-600 text-center text-sm mb-4 hidden"></div>

      <!-- Step 0: Terms & Conditions (FIRST) -->
      <div id="step-0" class="step">
        <h2 class="text-lg font-bold text-gray-800 mb-3">الموافقة على الشروط والأحكام</h2>

        <!-- Scrollable terms summary -->
        <div id="terms-box" class="max-h-56 overflow-y-auto rounded-xl border border-emerald-200 p-4 bg-emerald-50/40">
          <p class="text-sm text-gray-700 mb-2">
            قبل إنشاء حسابك، الرجاء الاطلاع على أهم البنود:
          </p>
          <ul class="list-disc list-inside text-sm text-gray-700 space-y-2">
            <li>سداد القسط الشهري في موعد أقصاه اليوم الخامس من كل شهر.</li>
            <li>غرامة تأخير ثابتة قدرها <strong>50 ريال سعودي</strong> عند التأخر.</li>
            <li>الرسوم الإدارية: <strong>7%</strong> للأدوار الأولى، <strong>5%</strong> للأدوار الوسط، و<strong>2%</strong> كاش باك للأدوار الأخيرة.</li>
            <li>الانسحاب قبل أول قسط: بدون رسوم. بعد تأكيد الاشتراك وقبل أول قسط: <strong>50 ريال</strong> رسوم. بعد الدفع: حالات استثنائية فقط.</li>
            <li>تضمن الشركة تحصيل المبالغ واتخاذ الإجراءات القانونية عند عدم السداد.</li>
            <li>البيانات تُستخدم لإدارة الجمعية فقط، مع حماية بتقنيات تشفير.</li>
          </ul>
          <p class="text-sm text-gray-600 mt-3">
            للمستند الكامل، اطلع على
            <a href="./terms.html" class="text-emerald-700 font-semibold hover:underline">الشروط والأحكام</a>
            و
            <a href="./privacy.html" class="text-emerald-700 font-semibold hover:underline">سياسة الخصوصية</a>.
          </p>
          <div class="h-6"></div>
        </div>

        <!-- Scroll hint -->
        <div id="scroll-hint" class="text-xs text-gray-500 mt-2">مرّر إلى نهاية المحتوى لتفعيل الموافقة</div>

        <!-- Checkboxes -->
        <div class="mt-4 space-y-3">
          <label class="flex items-center gap-2 text-sm text-gray-800">
            <input id="agree-terms" class="terms-checkbox h-5 w-5 rounded-md text-emerald-600" type="checkbox" disabled />
            <span>لقد قرأت وفهمت <a href="./terms.html" class="text-emerald-700 hover:underline">الشروط والأحكام</a></span>
          </label>
          <label class="flex items-center gap-2 text-sm text-gray-800">
            <input id="agree-privacy" class="terms-checkbox h-5 w-5 rounded-md text-emerald-600" type="checkbox" disabled />
            <span>أوافق على <a href="./privacy.html" class="text-emerald-700 hover:underline">سياسة الخصوصية</a></span>
          </label>
        </div>

        <!-- Actions: NEXT ONLY -->
        <div class="flex gap-3 mt-6">
          <button type="button" id="to-step-1"
                  class="w-full py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed"
                  disabled>
            التالي
          </button>
        </div>
      </div>

      <!-- Step 1: Full Name -->
      <div id="step-1" class="step hidden">
        <label class="block mb-2 text-gray-700 font-bold">الاسم الكامل</label>
        <input
          name="fullName"
          required
          class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500"
          placeholder="أدخل اسمك الكامل"
          autocomplete="name"
        />
        <div class="flex gap-3 mt-6">
          <button type="button" class="w-1/2 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold" data-step-back="0">رجوع</button>
          <button type="button" id="to-step-2" class="w-1/2 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold">التالي</button>
        </div>
      </div>

      <!-- Step 2: Phone and Email -->
      <div id="step-2" class="step hidden">
        <label class="block mb-2 text-gray-700 font-bold">رقم الهاتف</label>
        <input
          name="phone"
          required
          type="tel"
          inputmode="numeric"
          class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500"
          placeholder="010xxxxxxxx"
          autocomplete="tel"
        />
        <label class="block mt-4 mb-2 text-gray-700 font-bold">البريد الإلكتروني</label>
        <input
          name="email"
          type="email"
          class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500"
          placeholder="your@email.com"
          autocomplete="email"
        />
        <div class="flex gap-3 mt-6">
          <button type="button" class="w-1/2 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold" data-step-back="1">رجوع</button>
          <button type="button" id="to-step-3" class="w-1/2 py-3 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-bold">التالي</button>
        </div>
      </div>

      <!-- Step 3: National ID & Password (LAST) -->
      <div id="step-3" class="step hidden">
        <label class="block mb-2 text-gray-700 font-bold">رقم الهوية</label>
        <input
          name="nationalId"
          required
          class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500"
          placeholder="أدخل رقم الهوية"
          autocomplete="off"
        />

        <label class="block mt-4 mb-2 text-gray-700 font-bold">كلمة المرور</label>
        <input
          name="password"
          required
          type="password"
          class="w-full p-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-emerald-500"
          placeholder="********"
          autocomplete="new-password"
          minlength="8"
        />
        <p class="text-xs text-gray-500 mt-1">يُفضل أن تحتوي كلمة المرور على حروف كبيرة وصغيرة وأرقام ورموز.</p>

        <div class="flex gap-3 mt-6">
          <button type="button" class="w-1/2 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-bold" data-step-back="2">رجوع</button>
          <button id="submit-btn" type="submit" class="w-1/2 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold disabled:opacity-50 disabled:cursor-not-allowed">
            تسجيل
          </button>
        </div>
      </div>
    </form>

    <!-- Footer -->
    <div class="bg-gray-50 py-4 px-6 text-center text-gray-500 text-sm">
      <p>تبدأ عملية التسجيل بالموافقة على الشروط والأحكام.</p>
      <p class="mt-2">
        لديك حساب بالفعل؟
        <a href="login.html" class="text-blue-600 hover:underline font-bold">اذهب لتسجيل الدخول</a>
      </p>
    </div>
  </div>

  <script src="./register.js"></script>
</body>
</html>
