<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>جمعياتي / My Associations</title>

  <!-- Bootstrap & Icons -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">

  <!-- Your main layout CSS -->
  <link rel="stylesheet" href="mainLayout.css">

  <!-- Google Font Icons -->
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=arrow_circle_left" />

  <!-- Tailwind -->
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
  <link rel="stylesheet" href="dist/tailwind.css">

  <style>
    /* Bottom Navbar */
    .bottom-navbar {
      position: fixed;
      bottom: 0;
      right: 0;
      left: 0;
      width: 100%;
      background: #fff;
      border-top: 1.5px solid #eee;
      display: flex;
      justify-content: space-around;
      align-items: center;
      height: 54px;
      z-index: 10;
      box-shadow: 0 2px 10px #0001;
      font-size: 13px;
    }

    .bottom-navbar .label {
      margin-top: 3px;
      font-weight: 500;
      text-align: center;
      line-height: 1.1;
    }

    .bottom-navbar>div {
      flex: 1 1 0;
      text-align: center;
      cursor: pointer;
      padding: 7px 0 0 0;
    }

    .bottom-navbar .active-footer,
    .bottom-navbar .active-footer .label {
      color: #16a34a !important;
      font-weight: 700;
    }
  </style>
</head>

<body>
  <!-- Loader -->
  <!-- <div id="loader"
    style="position:fixed;inset:0;z-index:9999;display:flex;align-items:center;justify-content:center;background:#fff">
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        background-color: #f9f9f9;
        /* Light gray background to match the image edge */
      }

      /* لتجنب أي مشاكل في تناسب الصورة داخل الحاوية */
      img {
        max-width: 100%;
        height: auto;
      }

      /*
         * تعديلات مخصصة لشاشات الموبايل الصغيرة (تقريباً 390px وما شابه)
         * باستخدام Tailwind's 'sm' breakpoint (الافتراضي 640px)، يمكننا استهداف ما هو أصغر
         */
      @media (max-width: 639px) {

        /* يستهدف الشاشات الأصغر من sm: */
        .text-xs-custom {
          font-size: 0.625rem;
          /* 10px */
        }

        /* أصغر للبنك الأهلي السعودي والترجمة */
        .text-lg-custom {
          font-size: 1.125rem;
          /* 18px */
        }

        /* أكبر للمملكة العربية السعودية */
        .w-flag-sm {
          width: 2rem;
          /* 32px - أكبر للعلم */
        }
      }
    </style>
    <div
      class="relative w-full max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl bg-white shadow-lg p-8 h-screen flex flex-col justify-between items-center overflow-hidden">
      <div class="flex flex-col items-center justify-center flex-grow text-center">
        <img src="./Assets/imgs/Capture-removebg-preview (13)-pica.png" alt="جمعيتي Logo"
          class="w-32 h-32 sm:w-40 sm:h-40 md:w-48 md:h-48 mb-4 object-contain">
      </div>

      <div class="flex flex-col items-center justify-end w-full mt-auto pb-4 sm:pb-8">
        <p class="text-xs-custom sm:text-sm text-gray-600 whitespace-nowrap text-center">البنك الأهلي السعودي</p>

        <div class="flex items-center justify-center mt-0"> <img src="./Assets/imgs/download-pica.png"
            alt="علم المملكة العربية السعودية" class="w-flag-sm sm:w-8 md:w-9 mr-1 sm:mr-2 order-first object-contain">
          <p class="text-lg-custom sm:text-xl md:text-2xl font-bold text-gray-700 whitespace-nowrap order-last">المملكة
            العربية السعودية</p>
        </div>

        <p class="text-xs-custom sm:text-xs text-gray-500 whitespace-nowrap text-center mt-0">National Bank of Saudi
          Arabia</p>
      </div>
    </div>

  </div> -->

  <!-- Navbar Top -->
  <div style="background-color:#90D1CA;"
    class="navbar fixed top-0 left-0 w-full z-50 flex justify-between items-center px-4 py-2 shadow-md rounded-b-lg"
    dir="ltr">

    <!-- Left icons -->
    <div class="flex gap-4 items-center">
      <!-- Notifications -->
      <div class="relative">
        <button id="notification-toggle" onclick="location.href='./Notification.html'" class="focus:outline-none" title="الإشعارات / Notifications">
          <i class="bi bi-bell-fill text-2xl text-black hover:text-[#16a34a] transition-colors duration-200"></i>
        </button>
        <!-- <div id="notification-dropdown" class="hidden absolute left-0 mt-2 w-64 bg-white shadow-lg rounded-md z-50 p-3">
          <div class="flex justify-between items-center border-b pb-2 mb-2">
            <span class="font-bold text-sm text-gray-700">الإشعارات</span>
            <span class="bg-green-600 text-white text-xs px-2 py-0.5 rounded-full">0</span>
          </div>
          <div class="text-center text-gray-500">
            <i class="bi bi-bell-slash text-2xl mb-1"></i>
            <p class="text-sm">لا توجد إشعارات جديدة</p>
          </div>
        </div> -->
      </div>

      <!-- Trends -->
      <button title="الرائج / Trends" class="focus:outline-none">
        <i class="bi bi-fire text-2xl text-black hover:text-[#16a34a] transition-colors duration-200"></i>
      </button>
    </div>

    <!-- User Profile -->
    <div class="relative">
      <button id="profile-toggle" class="focus:outline-none" title="الملف الشخصي / Profile">
        <i class="bi bi-person-circle text-2xl text-black hover:text-[#16a34a] transition-colors duration-200"></i>
      </button>
      <div id="popup-menu" class="hidden absolute right-0 mt-2 w-40 bg-white shadow-lg rounded-md z-50 p-2">
        <a href="./profile.html" class="block text-sm text-black py-1 hover:text-green-600">Profile</a>
        <button class="block text-sm w-full text-left py-1 hover:text-green-600">Settings</button>
        <button id="logout-btn"
          class="block text-sm w-full text-left text-red-600 py-1 hover:text-red-800">Logout</button>
      </div>
    </div>
  </div>

  <!-- Spacer so content isn't hidden under navbar -->
  <div class="h-2"></div>

<!-- Dashboard Content -->
<div class="dashboard-container max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" dir="ltr">

  <!-- Cards Grid Wrapper -->
  <div class="grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-1 gap-6 mt-5">

    <!-- Card 1 -->
<div class="overflow-hidden" id="slider">
  <div id="slides" class="flex transition-transform duration-300 ease-in-out touch-pan-x">
    <!-- Slide 1 -->
    <div class="min-w-full flex-shrink-0 p-4">
      <div class="bg-[#092BA712] rounded-xl p-4 shadow-md flex flex-col gap-3">
        <div class="flex justify-between items-start">
          <div class="flex flex-col gap-1">
            <h2 class="text-[#333] font-bold text-lg">خليك جاهز للصيف</h2>
            <a href="./join.html" class="text-[#3B82F6] text-sm font-medium">إشترك في جمعية</a>
            <p class="text-[#333] text-sm font-semibold mt-2">بخصم 20% على الرسوم</p>
          </div>
          <div class="text-5xl text-[#3B82F6]">⛱️</div>
        </div>
        <div class="text-yellow-400 text-xl text-end">☀️</div>
      </div>
    </div>
    <!-- Slide 2 -->
    <div class="min-w-full flex-shrink-0 p-4">...نفس الكارت...</div>
    <!-- Slide 3 -->
    <div class="min-w-full flex-shrink-0 p-4">...نفس الكارت...</div>
  </div>
</div>



    <!-- Card 2 -->
    <div
      class="w-full bg-[#499F6882] rounded-xl p-4 shadow-md flex flex-col gap-4">
      <div class="flex items-center gap-3">
        <img src="./Assets/imgs/Group 13986.svg" alt="" class="h-8">
        <div class="flex flex-col">
          <p class="text-[#1E1E1E] text-sm font-bold text-end">خصم 300 ر.س ليك ولأصحابك.</p>
          <p class="text-[#1E1E1E] text-sm text-end">إبعت دعوات أكتر، واستفيد بخصومات أكبر.</p>
        </div>
      </div>
      <div class="flex justify-between items-center px-4">
        <img src="./Assets/imgs/Group 13987.svg" alt="" class="h-8">
        <button id="invite-btn"
          class="bg-white text-[#1E1E1E] font-semibold text-sm px-4 py-2 rounded-lg border border-gray-400 hover:bg-gray-100 transition">
          إبعت دعوة
        </button>
      </div>
    </div>

    <!-- لو عندك كروت تانية تضيفها هنا بنفس النمط -->

  </div>

  <!-- Copy Modal (بيظهر فوق كل حاجة) -->
  <div id="copy-modal"
       class="fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-lg shadow-lg px-8 py-6 text-center">
      <div class="text-green-600 text-3xl mb-2">
        <i class="bi bi-clipboard-check"></i>
      </div>
      <div class="text-lg font-semibold mb-2">تم نسخ رابط الدعوة!</div>
      <div class="text-gray-600 mb-4">يمكنك مشاركته مع أصدقائك.</div>
      <div id="social-share" class="flex justify-center gap-3 mb-2 hidden">
        <a id="wa-share" href="#" target="_blank" title="واتساب">
          <i class="bi bi-whatsapp text-2xl text-green-500"></i>
        </a>
        <a id="tw-share" href="#" target="_blank" title="تويتر">
          <i class="bi bi-twitter text-2xl text-blue-400"></i>
        </a>
        <a id="fb-share" href="#" target="_blank" title="فيسبوك">
          <i class="bi bi-facebook text-2xl text-blue-600"></i>
        </a>
      </div>
      <button id="close-modal-btn"
              class="mt-2 px-4 py-2 bg-[#16a34a] text-white rounded hover:bg-[#128a3a] transition">
        إغلاق
      </button>
    </div>
  </div>

  <!-- Joined Associations -->
  <h3 class="hidden mb-4 text-center text-[#0FA451]">
    جمعياتي المنضمة<br>
    <span class="text-xs">My Joined Associations</span>
  </h3>
  <div id="circle-list">
    <!-- associations loaded by home.js -->
  </div>

</div>

  <!-- Navbar Bottom -->
  <div class="bottom-navbar flex justify-between items-center px-1 py-0 shadow-md rounded-t-lg"
    style="background-color:#90D1CA;" dir="rtl">

    <div onclick="location.href='home.html'" class="p-0 text-[#008D10]">
      <i class="bi bi-house-door-fill text-xl "></i>
      <div class="label ">الرئيسية</div>
    </div>

    <div onclick="location.href='circle-list.html'" class="p-0">
      <i class="bi bi-people-fill text-xl"></i>
      <div class="label">جمعياتي</div>
    </div>

    <div onclick="location.href='join.html'" class="grid justify-center active-footer p-0 mb-3">
      <!-- <span class="material-symbols-outlined text-3xl">
        arrow_circle_left
      </span> -->
      <img src="./Assets/imgs/SubscribeIcon.svg" class="" alt="">
      <div class="label" style=" font-weight:700;">انضم الان</div>
    </div>

    <div onclick="location.href='./wallet.html'" class="p-0">
      <i class="bi bi-credit-card-fill text-xl"></i>
      <div class="label">محفظتي</div>
    </div>

    <div onclick="location.href='payments.html'" class="p-0 ">
      <i class="bi bi-file-earmark-check-fill text-xl"></i>
      <div class="label">المدفوعات</div>
    </div>

  </div>
  <!-- External JS -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <script src="./home.js"></script>

  <!-- Dropdown & Logout Script -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const notifToggle = document.getElementById("notification-toggle");
      const notifDropdown = document.getElementById("notification-dropdown");
      const profToggle = document.getElementById("profile-toggle");
      const profMenu = document.getElementById("popup-menu");
      const logoutBtn = document.getElementById("logout-btn");

      function closeAll() {
        if (notifDropdown) {
          notifDropdown.classList.add("hidden");
        }
        profMenu.classList.add("hidden");
      }

      notifToggle.addEventListener("click", e => {
        e.stopPropagation();
        profMenu.classList.add("hidden");
        if (notifDropdown) {
          notifDropdown.classList.toggle("hidden");
        }
      });

      profToggle.addEventListener("click", e => {
        e.stopPropagation();
        if (notifDropdown) {
          notifDropdown.classList.add("hidden");
        }
        profMenu.classList.toggle("hidden");
      });

      document.addEventListener("click", closeAll);
      if (notifDropdown) {
        notifDropdown.addEventListener("click", e => e.stopPropagation());
      }
      profMenu.addEventListener("click", e => e.stopPropagation());

      if (logoutBtn) {
        logoutBtn.addEventListener("click", () => {
          localStorage.removeItem("token");
          window.location.href = "login.html";
        });
      }

      // Invite/share fallback
      const inviteBtn = document.getElementById('invite-btn');
      const copyModal = document.getElementById('copy-modal');
      const closeModalBtn = document.getElementById('close-modal-btn');
      const shareUrl = 'https://abdelrhmanaymanfathi.github.io/Deployment-Gamaia/';
      const socialShare = document.getElementById('social-share');
      const waShare = document.getElementById('wa-share');
      const twShare = document.getElementById('tw-share');
      const fbShare = document.getElementById('fb-share');

      if (inviteBtn) {
        inviteBtn.addEventListener('click', () => {
          const shareData = {
            title: 'جمعياتي',
            text: 'انضم لجمعيتي واحصل على خصم!',
            url: shareUrl
          };
          if (navigator.share) {
            navigator.share(shareData).catch(() => { });
          } else {
            // إعداد روابط السوشيال ميديا
            if (waShare && twShare && fbShare && socialShare) {
              waShare.href = `https://wa.me/?text=${encodeURIComponent(shareData.text + ' ' + shareUrl)}`;
              twShare.href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareData.text)}&url=${encodeURIComponent(shareUrl)}`;
              fbShare.href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareUrl)}`;
              socialShare.classList.remove('hidden');
            }
            if (navigator.clipboard) {
              navigator.clipboard.writeText(shareUrl).then(() => {
                if (copyModal) copyModal.classList.remove('hidden');
              });
            } else {
              window.prompt("انسخ هذا الرابط وشاركه مع أصدقائك:", shareUrl);
            }
          }
        });
      }

      if (closeModalBtn && copyModal) {
        closeModalBtn.addEventListener('click', () => {
          copyModal.classList.add('hidden');
          if (socialShare) socialShare.classList.add('hidden');
        });
        copyModal.addEventListener('click', e => {
          if (e.target === copyModal) {
            copyModal.classList.add('hidden');
            if (socialShare) socialShare.classList.add('hidden');
          }
        });
      }
    });
  </script>
<!-- slider -->
<script>
  const slides = document.getElementById('slides');
  const slider = document.getElementById('slider');
  let isDragging = false;
  let startPos = 0;
  let currentTranslate = 0;
  let prevTranslate = 0;
  let currentIndex = 0;

  slider.addEventListener("touchstart", start);
  slider.addEventListener("touchmove", move);
  slider.addEventListener("touchend", end);

  function start(e) {
    isDragging = true;
    startPos = e.touches[0].clientX;
  }

  function move(e) {
    if (!isDragging) return;
    const currentPosition = e.touches[0].clientX;
    const diff = currentPosition - startPos;
    slides.style.transform = `translateX(${prevTranslate + diff}px)`;
  }

  function end(e) {
    isDragging = false;
    const moved = e.changedTouches[0].clientX - startPos;
    const width = slider.clientWidth;

    if (moved < -50 && currentIndex < slides.children.length - 1) currentIndex++;
    else if (moved > 50 && currentIndex > 0) currentIndex--;

    currentTranslate = -currentIndex * width;
    slides.style.transform = `translateX(${currentTranslate}px)`;
    prevTranslate = currentTranslate;
  }

  window.addEventListener("resize", () => {
    currentTranslate = -currentIndex * slider.clientWidth;
    slides.style.transform = `translateX(${currentTranslate}px)`;
    prevTranslate = currentTranslate;
  });
</script>

</body>

</html>